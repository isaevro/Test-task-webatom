(this.webpackJsonpsneakers=this.webpackJsonpsneakers||[]).push([[0],{19:function(e,t,c){e.exports={molecule:"Molecule_molecule__gvt7x",choose:"Molecule_choose__LxtnM",click:"Molecule_click__3DIMU"}},40:function(e,t,c){},61:function(e,t,c){"use strict";c.r(t);var s=c(0),r=c.n(s),i=c(9),n=function(e){var t=e.map((function(e){return e.discount_price})).reduce((function(e,t){return e+ +t}),0);return Math.round(100*t)/100},a=Object(i.b)({name:"cart",initialState:{cartItems:[],price:0,error:"",isLoading:!1,isOrdered:!1},reducers:{addToCart:function(e,t){e.cartItems.filter((function(e){return e.id!==t.payload.id})).length===e.cartItems.length?e.cartItems.push(t.payload):e.cartItems=e.cartItems.filter((function(e){return e.id!==t.payload.id})),e.price=n(e.cartItems),e.isOrdered=!1},removeCartItem:function(e,t){e.cartItems=e.cartItems.filter((function(e){return e.id!==t.payload})),e.price=n(e.cartItems)},cartItemsPostingSuccess:function(e){e.isLoading=!1},cartItemsPosting:function(e){e.isLoading=!0,e.error="",e.cartItems=[],e.price=0,e.isOrdered=!0},cartItemsPostingError:function(e,t){e.isLoading=!1,e.error=t.payload}}}),d=a.actions,l=d.addToCart,o=d.removeCartItem,j=(d.removeAllCartItems,a.reducer),u=Object(i.b)({name:"items",initialState:{salads:[],molecules:[],isLoading:!1,error:""},reducers:{itemsFetchingSuccess:function(e,t){e.isLoading=!1,e.error="",e.salads=t.payload.salads,e.molecules=t.payload.molecules},itemsFetching:function(e){e.isLoading=!0},itemsFetchingError:function(e,t){e.isLoading=!1,e.error=t.payload}}}),m=u.reducer,h=Object(i.b)({name:"selfMade",initialState:{myComposition:[],price:0,discount_price:0},reducers:{addToSelfMade:function(e,t){e.myComposition.filter((function(e){return e!==t.payload.id})).length===e.myComposition.length?(e.myComposition.push(t.payload.id),e.price=e.price+t.payload.price,e.discount_price=e.discount_price+t.payload.discount_price):(e.myComposition=e.myComposition.filter((function(e){return e!==t.payload.id})),e.price=e.price-t.payload.price,e.discount_price=e.discount_price-t.payload.discount_price)}}}),b=h.actions.addToSelfMade,p=h.reducer,x=Object(i.a)({reducer:{cart:j,items:m,selfMade:p}}),O=c(3),g=c(16),f=c.n(g),v=(c(40),c(7)),_=c(2),y=c(22),N=c(13),C=c.n(N),w=c(18),I=c.n(w),k=c(1),L=function(e){var t=e.close,c=Object(O.c)((function(e){return e.cart})),s=c.cartItems,r=c.price,i=c.error,n=c.isLoading,d=c.isOrdered,l=Object(O.b)();return Object(k.jsx)("div",{className:"sidebar-wrapper",onClick:function(e){return e.currentTarget===e.target&&t()},children:Object(k.jsxs)("div",{className:"sidebar",children:[Object(k.jsxs)("div",{className:"sidebar-title",children:[Object(k.jsx)("h2",{children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),Object(k.jsx)("img",{onClick:t,className:"close-cart",src:"./img/close.svg",alt:"close"})]}),Object(k.jsx)("div",{className:"sidebar-top",children:Object(k.jsxs)("div",{className:"card-side-items",children:[s.map((function(e){return Object(k.jsx)("div",{className:"card-side-item",children:Object(k.jsxs)("div",{className:"card-side-item-inner",children:[Object(k.jsx)("img",{width:70,height:70,className:"sidebar-pic",src:"./img/salad.jpg",alt:"salad"}),Object(k.jsxs)("div",{className:"card-side-descr",children:[Object(k.jsx)("p",{children:e.title}),Object(k.jsxs)("b",{children:[e.discount_price," $"]})]}),Object(k.jsx)("img",{onClick:function(){return l(o(e.id))},className:"close-pic",src:"./img/close.svg",alt:"close"})]})},e.id)})),0===s.length&&!d&&!i&&!n&&Object(k.jsxs)("div",{style:{paddingTop:"80px"},className:"no-items",children:[Object(k.jsx)("img",{style:{cursor:"default"},width:70,height:70,src:"./img/empty-cart.png",alt:""}),Object(k.jsx)("h2",{children:"\u0417\u0434\u0435\u0441\u044c \u043f\u043e\u043a\u0430 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435\u0442 :("}),Object(k.jsx)("p",{children:"\u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0442\u043e\u0432\u0430\u0440 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]}),n&&Object(k.jsx)("div",{style:{paddingTop:"80px"},className:"no-items",children:Object(k.jsx)("h2",{style:{color:"#9dd558"},children:"'\u0438\u0434\u0435\u0442 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u0430...'"})}),0===s.length&&d&&!i&&!n&&Object(k.jsxs)("div",{style:{paddingTop:"80px"},className:"no-items",children:[Object(k.jsx)("img",{style:{cursor:"default"},width:67,height:97,src:"./img/complete.jpg",alt:"complete"}),Object(k.jsx)("h2",{style:{color:"#9dd558"},children:"\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0443! :)"}),Object(k.jsx)("p",{children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d."})]}),0===s.length&&i&&Object(k.jsxs)("div",{style:{paddingTop:"80px"},className:"no-items",children:[Object(k.jsx)("h2",{style:{color:"#9dd558"},children:"\u043f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430"}),Object(k.jsx)("p",{children:i})]})]})}),Object(k.jsxs)("div",{className:"sidebar-bottom",children:[Object(k.jsxs)("div",{className:"sidebar-price",children:[Object(k.jsx)("b",{children:"\u0418\u0442\u043e\u0433\u043e:"}),Object(k.jsx)("div",{}),Object(k.jsxs)("p",{children:[r," $"]})]}),Object(k.jsxs)("button",{className:"sidebar-submit",disabled:0===s.length,onClick:function(){return l(function(){var e=Object(y.a)(C.a.mark((function e(t,c){var s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=c().cart.cartItems,t(a.actions.cartItemsPosting()),e.next=5,I.a.post("http://test-job.webatom.ru/order",{order:s});case 5:if(!e.sent.data.success){e.next=10;break}t(a.actions.cartItemsPostingSuccess()),e.next=11;break;case 10:throw new Error("\u041d\u0435\u0443\u0441\u043f\u0435\u0448\u043d\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441 \u043d\u0430 \u043f\u043e\u043a\u0443\u043f\u043a\u0443");case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),t(a.actions.cartItemsPostingError(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,c){return e.apply(this,arguments)}}())},children:["\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437",Object(k.jsxs)("svg",{width:"16",height:"14",viewBox:"0 0 16 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(k.jsx)("path",{d:"M1 7H14.7143",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),Object(k.jsx)("path",{d:"M8.71436 1L14.7144 7L8.71436 13",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})]})]})]})})},M=c(11),S=function(e){var t=e.open,c=Object(O.c)((function(e){return e.cart})).price;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("header",{children:Object(k.jsx)("div",{className:"container",children:Object(k.jsxs)("div",{className:"header-inner",children:[Object(k.jsx)(M.b,{to:"/",children:Object(k.jsxs)("div",{className:"headerLeft",children:[Object(k.jsx)("img",{width:80,"max-height":40,src:"./logo.png",alt:""}),Object(k.jsxs)("div",{className:"headerInfo",children:[Object(k.jsx)("h3",{children:"\u0421\u0430\u043b\u0430\u0442\u044b \u0438\u0437 \u043c\u0430\u043b\u0435\u043a\u0443\u043b"}),Object(k.jsx)("div",{className:"sub-title",children:"\u043c\u0430\u0433\u0430\u0437\u0438\u043d \u043b\u0443\u0447\u0448\u0438\u0445 \u0441\u0430\u043b\u0430\u0442\u043e\u0432"})]})]})}),Object(k.jsx)("div",{className:"headerRight-inner",children:Object(k.jsxs)("ul",{className:"headerRight",children:[Object(k.jsxs)("li",{onClick:t,children:[Object(k.jsx)("img",{src:"./img/cart.svg",alt:"cart"}),Object(k.jsxs)("span",{children:[c,"$"]})]}),Object(k.jsx)("li",{style:{position:"relative"},children:Object(k.jsx)(M.b,{to:"/selfmade",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0432\u043e\u0439 \u0441\u0430\u043b\u0430\u0442"})})]})})]})})})})},T=c(17),F=c(8),A=c.n(F),E=function(e){var t=e.id,c=e.title,s=e.price,r=e.isCartAdded,i=e.molecules,n=e.composition,a=e.discount_price,d=Object(O.b)();return Object(k.jsx)("div",{className:A.a.card,children:Object(k.jsxs)("div",{className:A.a.cardInner,children:[Object(k.jsx)("img",{width:133,height:112,src:"./img/salad.jpg",alt:"salad",className:"yeezy-card-img"}),Object(k.jsx)("div",{className:"My Salad"!==c?A.a.title:null,children:c}),Object(k.jsxs)("p",{className:"My Salad"!==c?A.a.subtext:A.a.selfmade,children:["\u0441\u043e\u0441\u0442\u0430\u0432:"," ",n.map((function(e){return Object(k.jsx)("span",{children:i&&i.filter((function(t){return t._id===e})).map((function(e){return e.title+" "}))},e)}))]}),Object(k.jsxs)("div",{className:A.a.price,children:[Object(k.jsxs)("div",{className:A.a.priceInner,children:[Object(k.jsx)("p",{children:"\u0426\u0415\u041d\u0410:"}),Object(k.jsxs)("b",{children:[a," $"," ",Object(k.jsxs)("span",{className:A.a.oldprice,children:[s," $"]})," "]})]}),s?Object(k.jsx)("img",{onClick:function(){return d(l({id:t,title:c,discount_price:a,composition:n}))},src:r?"./img/added.svg":"./img/add.svg",alt:"add to cart"}):null]})]})})},P=c(32),$=function(){return Object(k.jsxs)(P.a,{speed:2,width:200,height:271,viewBox:"0 0 205 260",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(k.jsx)("rect",{x:"37",y:"30",rx:"0",ry:"0",width:"142",height:"83"}),Object(k.jsx)("rect",{x:"37",y:"144",rx:"0",ry:"0",width:"142",height:"13"}),Object(k.jsx)("rect",{x:"37",y:"159",rx:"0",ry:"0",width:"142",height:"15"}),Object(k.jsx)("rect",{x:"37",y:"200",rx:"0",ry:"0",width:"34",height:"11"}),Object(k.jsx)("rect",{x:"37",y:"215",rx:"0",ry:"0",width:"83",height:"14"}),Object(k.jsx)("rect",{x:"147",y:"200",rx:"0",ry:"0",width:"30",height:"29"})]})},B=function(){var e=Object(O.c)((function(e){return e.items})),t=e.salads,c=e.molecules,r=e.isLoading,i=e.error,n=Object(O.c)((function(e){return e.cart})).cartItems,a=Object(s.useState)(""),d=Object(v.a)(a,2),l=d[0],o=d[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"content",children:Object(k.jsxs)("div",{className:"container",children:[Object(k.jsxs)("div",{className:"title",children:[Object(k.jsx)("h1",{children:l?"\u043f\u043e\u0438\u0441\u043a \u043f\u043e ".concat(l):"\u0432\u0441\u0435 \u0441\u0430\u043b\u0430\u0442\u044b"}),Object(k.jsx)("h2",{children:i||null}),Object(k.jsxs)("div",{className:"search",children:[Object(k.jsx)("img",{src:"./img/search.svg",alt:"search"}),Object(k.jsx)("input",{type:"text",onChange:function(e){o(e.target.value)},value:l,placeholder:"\u041f\u043e\u0438\u0441\u043a..."})]})]}),Object(k.jsxs)("div",{className:"cards",children:[r&&Object(T.a)(Array(10)).map((function(e,t){return Object(k.jsx)("div",{className:"card",children:Object(k.jsx)($,{})},t)})),t.filter((function(e){return e.title.toLowerCase().includes(l.toLowerCase())})).map((function(e){return Object(k.jsx)(E,{discount_price:e.discount_price,composition:e.composition,molecules:c,id:e._id,title:e.title,price:e.price,isCartAdded:n.map((function(e){return e.id})).includes(e._id)},e._id)}))]})]})})})},J=c(19),R=c.n(J),U=function(e){var t=e.molecule,c=e.myComposition,s=Object(O.b)();return Object(k.jsxs)("li",{className:R.a.molecule,children:[Object(k.jsxs)("div",{className:R.a.choose,children:[Object(k.jsx)("div",{children:t.title}),Object(k.jsxs)("div",{children:["\u0446\u0435\u043d\u0430: ",t.discount_price," $"]})]}),Object(k.jsx)("img",{className:R.a.click,onClick:function(){return s(b({id:t._id,discount_price:t.discount_price,price:t.price}))},src:c.includes(t._id)?"./img/added.svg":"./img/add.svg",alt:"add to salad"})]})},q=function(){var e=Object(O.c)((function(e){return e.items})),t=e.molecules,c=e.isLoading,s=e.error,r=Object(O.c)((function(e){return e.cart})).cartItems,i=Object(O.c)((function(e){return e.selfMade})),n=i.price,a=i.discount_price,d=i.myComposition;return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)("div",{className:"content",children:Object(k.jsxs)("div",{className:"container",children:[Object(k.jsxs)("div",{className:"title",children:[Object(k.jsx)("h1",{children:"\u0421\u043e\u0431\u0435\u0440\u0438 \u0441\u0432\u043e\u0439 \u0441\u0430\u043b\u0430\u0442"}),Object(k.jsx)("h2",{children:s||null})]}),c&&Object(k.jsx)("div",{className:"cards",children:Object(T.a)(Array(1)).map((function(e,t){return Object(k.jsx)("div",{className:"card",children:Object(k.jsx)($,{})},t)}))}),!c&&!s&&Object(k.jsxs)("div",{className:"cards",children:[Object(k.jsx)(E,{title:"My Salad",discount_price:a,composition:d,molecules:t,id:"My Salad",price:n,isCartAdded:r.map((function(e){return e.id})).includes("My Salad")}),Object(k.jsx)("div",{children:Object(k.jsx)("ul",{children:t.filter((function(e){return e.qty>0})).map((function(e){return Object(k.jsx)(U,{myComposition:d,molecule:e},e._id)}))})})]})]})})})};var W=function(){var e=Object(s.useState)(!1),t=Object(v.a)(e,2),c=t[0],r=t[1],i=Object(O.b)();Object(s.useEffect)((function(){i(function(){var e=Object(y.a)(C.a.mark((function e(t){var c,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(u.actions.itemsFetching()),e.next=4,I.a.get("http://test-job.webatom.ru/salads").then((function(e){return e.data.result}));case 4:return c=e.sent,e.next=7,I.a.get("http://test-job.webatom.ru/molecules").then((function(e){return e.data.result}));case 7:s=e.sent,t(u.actions.itemsFetchingSuccess({salads:c,molecules:s})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(u.actions.itemsFetchingError(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[i]);var n=function(){r(!c)};return Object(k.jsx)("div",{className:"App",children:Object(k.jsxs)("div",{className:"main-container",children:[Object(k.jsx)(S,{open:n}),Object(k.jsxs)(_.c,{children:[Object(k.jsx)(_.a,{path:"/",element:Object(k.jsx)(B,{})}),Object(k.jsx)(_.a,{path:"/selfmade",element:Object(k.jsx)(q,{})})]}),c?Object(k.jsx)(L,{close:n}):null]})})};f.a.render(Object(k.jsx)(r.a.StrictMode,{children:Object(k.jsx)(M.a,{children:Object(k.jsx)(O.a,{store:x,children:Object(k.jsx)(W,{})})})}),document.getElementById("root"))},8:function(e,t,c){e.exports={card:"Card_card__oFbTl",cardInner:"Card_cardInner__20xlJ",subtext:"Card_subtext__3RQLw",favoriteIcon:"Card_favoriteIcon__35_Af",price:"Card_price__2n4Ua",priceInner:"Card_priceInner__1J57q",title:"Card_title__YXiBX",oldprice:"Card_oldprice__2kTgk",selfmade:"Card_selfmade__mnUxw"}}},[[61,1,2]]]);
//# sourceMappingURL=main.99785710.chunk.js.map